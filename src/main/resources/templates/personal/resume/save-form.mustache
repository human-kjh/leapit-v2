{{> layout/personal-header}}

<!-- 본문 시작 -->
<div class="main container mt-5">
    <div class="container py-4">
        <div class="row justify-content-center gx-5">

            <!-- 사이드바 -->
            <div class="col-md-3">
                <div class="card p-3">
                    <h5 class="fw-bold mb-1">항목편집</h5>
                    <div class="d-flex flex-column gap-2">

                        <!-- 필수 항목 (항상 보임) -->
                        <div class="mb-2 d-flex justify-content-between align-items-center">
                            <span>기본정보 <span class="text-danger">*</span></span>
                        </div>

                        <!-- 선택 항목들 -->
                        <div class="mb-2 d-flex justify-content-between align-items-center">
                            <span>사진</span>
                            <div class="form-check form-switch">
                                <input class="form-check-input" type="checkbox" id="toggle-photo" checked />
                            </div>
                        </div>

                        <div class="mb-2 d-flex justify-content-between align-items-center">
                            <span>간단소개</span>
                            <div class="form-check form-switch">
                                <input class="form-check-input" type="checkbox" id="toggle-summary" checked />
                            </div>
                        </div>

                        <div class="mb-2 d-flex justify-content-between align-items-center">
                            <span>개발직무 <span class="text-danger">*</span></span>
                        </div>

                        <div class="mb-2 d-flex justify-content-between align-items-center">
                            <span>기술스택 <span class="text-danger">*</span></span>
                        </div>

                        <div class="mb-2 d-flex justify-content-between align-items-center">
                            <span>링크</span>
                            <div class="form-check form-switch">
                                <input class="form-check-input" type="checkbox" id="toggle-link" checked />
                            </div>
                        </div>

                        <div class="mb-2 d-flex justify-content-between align-items-center">
                            <span>학력 <span class="text-danger">*</span></span>
                        </div>

                        <div class="mb-2 d-flex justify-content-between align-items-center">
                            <span>경력</span>
                            <div class="form-check form-switch">
                                <input class="form-check-input" type="checkbox" id="toggle-experience" checked />
                            </div>
                        </div>

                        <div class="mb-2 d-flex justify-content-between align-items-center">
                            <span>프로젝트 <span class="text-danger">*</span></span>
                        </div>

                        <div class="mb-2 d-flex justify-content-between align-items-center">
                            <span>교육이력</span>
                            <div class="form-check form-switch">
                                <input class="form-check-input" type="checkbox" id="toggle-training" checked />
                            </div>
                        </div>

                        <div class="mb-2 d-flex justify-content-between align-items-center">
                            <span>기타사항</span>
                            <div class="form-check form-switch">
                                <input class="form-check-input" type="checkbox" id="toggle-etc" checked />
                            </div>
                        </div>

                        <div class="mb-2 d-flex justify-content-between align-items-center">
                            <span>자기소개서 <span class="text-danger">*</span></span>
                        </div>

                    </div>
                </div>
            </div>

            <!-- 이력서 폼 -->
            <form class="col-md-9" id="resumeForm" method="post" enctype="multipart/form-data">
                <div class="resume-container">

                    <!-- 이력서 제목 -->
                    <div class="bg-white rounded-3 px-4 py-3 mb-4 shadow-sm">
                        <input id="title" type="text" class="form-control fw-semibold" placeholder="이력서 제목" value="더미 이력서 제목">
                    </div>

                    <!-- 기본정보 박스 -->
                    <div class="row g-4 align-items-stretch mb-4">
                        <!-- 사진 추가 박스 -->
                        <!-- 사진 추가 박스 -->
                        <div class="col-md-3" id="section-photo">
                            <div
                                    class="photo-box position-relative h-100 d-flex flex-column justify-content-center align-items-center bg-light rounded-3 shadow-sm"
                                    style="width: 100%; aspect-ratio: 1 / 1; min-height: 100%; cursor: pointer;">

                                <img id="photoPreview" src="#" alt="사진 미리보기" class="mt-2" style="max-width: 100%; display: none;" />

                                <input type="file" id="photoUpload" class="d-none" accept="image/*" name="photoUrlFile">

                                <button type="button" id="uploadBtn" class="btn border-0 bg-transparent position-absolute top-50 start-50 translate-middle">
                                    <i class="bi bi-plus-circle-fill text-primary fs-2 mb-2"></i>
                                </button>

                                <div id="photoHelperText" class="position-absolute bottom-0 mb-3 text-center">
                                    <div class="fw-semibold small text-secondary">사진추가</div>
                                </div>
                            </div>
                        </div>


                        <!-- 개인 정보 박스 -->
                        <div class="col-md-9">
                            <div class="bg-white rounded-3 p-4 shadow-sm h-100">
                                <div class="d-flex justify-content-between align-items-start mb-5">
                                    <h5 class="fw-bold mb-0">{{model.name}}</h5>
                                    <a href="/s/personal/user/update-form" class="btn btn-outline-secondary btn-sm">계정 정보 설정</a>
                                </div>
                                <div class="mb-2 d-flex flex-wrap align-items-center gap-3">
                                    <div class="d-flex align-items-center">
                                        <i class="bi bi-calendar3 me-2"></i> {{model.birthDate}}년생
                                    </div>
                                </div>
                                <div class="mb-2 d-flex flex-wrap align-items-center gap-3">
                                    <div class="d-flex align-items-center">
                                        <i class="bi bi-envelope me-2"></i> {{model.email}}
                                    </div>
                                </div>
                                <div class="mb-2 d-flex flex-wrap align-items-center gap-3">
                                    <div class="d-flex align-items-center">
                                        <i class="bi bi-telephone me-2"></i> {{model.contactNumber}}
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- 간단 소개 -->
                    <div id="section-summary" class="bg-white rounded-3 p-4 mb-4 shadow-sm">
                        <label class="form-label fw-bold">간단 소개</label>
                        <hr class="mt-1 mb-3" />
                        <input id="summary" type="text" class="form-control form-control-sm border-0" placeholder="요약"
                               value="열정 넘치는 개발자입니다.">
                    </div>

                    <!-- 개발직무 (필수) -->
                    <div class="bg-white rounded-3 p-4 mb-4 shadow-sm">
                        <label class="form-label fw-bold"><span class="text-danger">*</span> 개발직무</label>
                        <hr class="mt-1 mb-3" />
                        <select name="positionType" class="form-select">
                            <option disabled>직무 선택</option>
                            {{#model.positionTypeList}}
                                <option value="{{code}}">{{code}}</option>
                            {{/model.positionTypeList}}
                        </select>
                    </div>

                    <!-- 기술스택 (필수) -->
                    <div class="bg-white rounded-3 p-4 mb-4 shadow-sm">
                        <label class="form-label fw-bold"><span class="text-danger">*</span> 기술스택</label>
                        <hr class="mt-1 mb-3" />
                        <div class="dropdown">
                            <button id="selectedTechStacksBtn" class="form-select text-start border-0 bg-light px-3 py-2"
                                    type="button" data-bs-toggle="dropdown">
                                기술 스택을 선택하세요.
                            </button>
                            <ul class="dropdown-menu p-3" style="min-width: 250px;">
                                {{#model.techStackList}}
                                    <li>
                                        <div class="form-check">
                                            <input class="form-check-input tech-checkbox" type="checkbox" value="{{code}}" id="tech-{{code}}" checked>
                                            <label class="form-check-label" for="tech-{{code}}">{{code}}</label>
                                        </div>
                                    </li>
                                {{/model.techStackList}}
                            </ul>
                        </div>
                    </div>

                    <!-- 링크 -->
                    <div id="section-link" class="bg-white rounded-3 p-4 mb-4 shadow-sm">
                        <label class="form-label fw-bold">링크</label>
                        <hr class="mt-1 mb-3" />
                        <div class="linkContainer"></div>
                        <button type="button" class="btn btn-outline-primary btn-sm mt-2"
                                onclick="addItem('.linkContainer', '#linkTemplate')">
                            <i class="bi bi-plus-lg me-1"></i> 링크 추가
                        </button>
                    </div>

                    <!-- 학력 추가 -->
                    <div id="section-education" class="bg-white rounded-3 p-4 mb-4 shadow-sm">
                        <label class="form-label fw-bold"><span class="text-danger">*</span> 학력</label>
                        <hr class="mt-1 mb-3" />
                        <div class="educationContainer"></div>
                        <button type="button" class="btn btn-outline-primary btn-sm mt-2" onclick="addItem('.educationContainer', '#educationTemplate')">
                            <i class="bi bi-plus-lg me-1"></i> 학력 추가
                        </button>
                    </div>

                    <!-- 경력 추가 -->
                    <div id="section-experience" class="bg-white rounded-3 p-4 mb-4 shadow-sm">
                        <label class="form-label fw-bold">경력</label>
                        <hr class="mt-1 mb-3" />
                        <div class="experienceContainer"></div>
                        <button type="button" class="btn btn-outline-primary btn-sm mt-2" onclick="addItem('.experienceContainer', '#experienceTemplate')">
                            <i class="bi bi-plus-lg me-1"></i> 경력 추가
                        </button>
                    </div>

                    <!-- 프로젝트 추가 -->
                    <div id="section-project" class="bg-white rounded-3 p-4 mb-4 shadow-sm">
                        <label class="form-label fw-bold"><span class="text-danger">*</span> 프로젝트</label>
                        <hr class="mt-1 mb-3" />
                        <div class="projectContainer"></div>
                        <button type="button" class="btn btn-outline-primary btn-sm mt-2" onclick="addItem('.projectContainer', '#projectTemplate')">
                            <i class="bi bi-plus-lg me-1"></i> 프로젝트 추가
                        </button>
                    </div>

                    <!-- 교육이력 추가 -->
                    <div id="section-training" class="bg-white rounded-3 p-4 mb-4 shadow-sm">
                        <label class="form-label fw-bold">교육이력</label>
                        <hr class="mt-1 mb-3" />
                        <div class="trainingContainer"></div>
                        <button type="button" class="btn btn-outline-primary btn-sm mt-2" onclick="addItem('.trainingContainer', '#trainingTemplate')">
                            <i class="bi bi-plus-lg me-1"></i> 교육이력 추가
                        </button>
                    </div>

                    <!-- 기타사항 추가 -->
                    <div id="section-etc" class="bg-white rounded-3 p-4 mb-4 shadow-sm">
                        <label class="form-label fw-bold">기타사항</label>
                        <hr class="mt-1 mb-3" />
                        <div class="etcContainer"></div>
                        <button type="button" class="btn btn-outline-primary btn-sm mt-2" onclick="addItem('.etcContainer', '#etcTemplate')">
                            <i class="bi bi-plus-lg me-1"></i> 기타사항 추가
                        </button>
                    </div>

                    <!-- 자기소개서 -->
                    <div class="bg-white rounded-3 p-4 mb-4 shadow-sm">
                        <label class="form-label fw-bold">자기소개서</label>
                        <hr class="mt-1 mb-3" />
                        <textarea id="selfIntroduction" class="form-control" rows="6" placeholder="자기소개서">저는 3년차 백엔드 개발자입니다.</textarea>
                    </div>

                    <!-- 등록하기 버튼 -->
                    <div class="mt-4">
                        <button type="button" class="btn btn-primary w-100 py-2 fw-semibold" onclick="saveResume()">등록하기</button>
                    </div>
                </div>
            </form>

        </div>
    </div>
</div>
<!-- 본문 끝 -->

<!-- 템플릿 모음 -->
{{> personal/resume/save-form-templates}}

<!-- 스크립트 모음 -->
{{> personal/resume/save-form-scripts}}

{{> layout/footer}}